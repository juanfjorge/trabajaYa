<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Conversor en Modal</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

</head>
<body class="p-4 bg-light">

  <!-- Bot칩n para abrir el modal -->
  <div class="text-center">
    <button type="button" class="btn btn-primary btn-lg" data-bs-toggle="modal" data-bs-target="#conversorModal">
      游눯 Cotizar Criptomonedas
    </button>
  </div>

  <!-- Modal -->
  <div class="modal fade" id="conversorModal" tabindex="-1" aria-labelledby="conversorModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="conversorModalLabel">Conversor de Criptomonedas</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
        </div>
        <div class="modal-body">
          <!-- Conversor dentro del modal -->
          <div class="mb-3">
            <label for="cantidad" class="form-label">Cantidad en Pesos Argentinos (ARS):</label>
            <input type="number" id="cantidad" class="form-control" placeholder="Ej: 50000">
          </div>

          <div class="card p-3 mb-3">
            <h6>Seleccion치 una criptomoneda:</h6>
            <div class="row row-cols-2 row-cols-md-3 g-2 mt-2" >
              <div class="col"><button class="btn btn-outline-primary w-100 cripto-btn" style=" white-space: nowrap" onclick="seleccionarCripto(this, 'bitcoin', 'Bitcoin (BTC)')">Bitcoin (BTC)</button></div>
              <div class="col"><button class="btn btn-outline-primary w-100 cripto-btn" style=" white-space: nowrap" onclick="seleccionarCripto(this, 'ethereum', 'Ethereum (ETH)')">Ethereum (ETH)</button></div>
              <div class="col"><button class="btn btn-outline-primary w-100 cripto-btn" style=" white-space: nowrap" onclick="seleccionarCripto(this, 'dogecoin', 'Dogecoin (DOGE)')">Dogecoin (DOGE)</button></div>
              <div class="col"><button class="btn btn-outline-primary w-100 cripto-btn" style=" white-space: nowrap" onclick="seleccionarCripto(this, 'solana', 'Solana (SOL)')">Solana (SOL)</button></div>
              <div class="col"><button class="btn btn-outline-primary w-100 cripto-btn" style=" white-space: nowrap" onclick="seleccionarCripto(this, 'cardano', 'Cardano (ADA)')">Cardano (ADA)</button></div>
              <div class="col"><button class="btn btn-outline-primary w-100 cripto-btn" style=" white-space: nowrap" onclick="seleccionarCripto(this, 'ripple', 'Ripple (XRP)')">Ripple (XRP)</button></div>
            </div>
          </div>

          <button class="btn btn-success" onclick="convertir()">Convertir</button>

          <div id="resultado" class="mt-3 fw-bold"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap + Script del conversor -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    let criptoSeleccionada = null;
    let criptoNombre = '';

    function seleccionarCripto(btn, id, nombre) {
      criptoSeleccionada = bitcoin;
      criptoNombre = 'Bitcoin (BTC)';


    }

    async function convertir() {
      const cantidadARS = parseFloat(document.getElementById('cantidad'));
      const resultado = document.getElementById('resultado');

      if (!criptoSeleccionada) {
        resultado.textContent = "Por favor, seleccion치 una criptomoneda.";
        return;
      }

      if (isNaN(cantidadARS) || cantidadARS <= 0) {
        resultado.textContent = "Ingres치 una cantidad v치lida en ARS.";
        return;
      }

      try {
        const url = `https://api.coingecko.com/api/v3/simple/price?ids=${criptoSeleccionada}&vs_currencies=ars`;
        const res = await fetch(url);
        const data = await res.json();

        const precioEnARS = data[criptoSeleccionada].ars;
        const cantidadCripto = cantidadARS / precioEnARS;

        resultado.textContent = `${cantidadARS.toLocaleString()} ARS equivalen a ${cantidadCripto.toFixed(8)} ${criptoNombre}`;
      } catch (error) {
        resultado.textContent = "Error al obtener datos de cotizaci칩n.";
        console.error(error);
      }
    }
  </script>
</body>
</html>
